{"mode":"editor","version":"0.69.0","windowDimensions":{"x":277,"y":22,"width":1024,"height":1414},"syntax":{"deserializer":"Syntax","grammarOverridesByPath":{}},"project":{"path":"/Users/mattgarrison/Projects/apps/espn_app","buffers":[{"text":"source \"https://rubygems.org\"\n\ngem \"rake\"\ngem \"ProMotion\", \"~> 1.1.0\"\ngem \"afmotion\", \"~> 2.0.0\"\ngem \"motion-stump\", \"~> 0.3.0\"\n","markers":{"markers":{"1":{"id":1,"range":[[4,0],[4,0]],"tailed":false,"reversed":true,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":15,"goalBufferRange":null,"preserveFolds":true},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[],"redoStack":[],"deserializer":"History"},"filePath":"/Users/mattgarrison/Projects/apps/espn_app/Gemfile","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"bc5a71a2a90ad673e15b7d5e57e30028c4f4d92b","deserializer":"TextBuffer"},{"text":"describe HomeScreen do\n  tests HomeScreen\n\n  def controller\n    @controller ||= HomeScreen.new\n  end\n  alias :screen :controller\n\n  it \"is a TableScreen\" do\n    screen.should.be.kind_of(PM::TableScreen)\n  end\n\n  it \"loads headlines\" do\n    screen.on_load\n    wait 2 do\n      screen.table_data.first[:cells].length.should.be > 0\n    end\n  end\n\n  it \"opens the link URL when you tap a cell\" do\n    links = {\n      \"web\" => { \"href\" => \"http://www.google.com\" }\n    }\n\n    stub_table_data = [{\n      cells: [\n        { title: \"Test Title\", action: :tap_headline, arguments: { links: links } }\n      ]\n    }]\n\n    UIApplication.sharedApplication.mock! \"openURL:\" do |url|\n      url.should == NSURL.URLWithString(\"http://www.google.com\")\n    end\n    screen.stub!(:table_data, { return: stub_table_data })\n    screen.update_table_data\n\n    tap view(\"Test Title\")\n  end\nend\n","markers":{"markers":{"1":{"id":1,"range":[[34,28],[34,28]],"tailed":false,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":21,"goalBufferRange":null,"preserveFolds":true},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[],"redoStack":[],"deserializer":"History"},"filePath":"/Users/mattgarrison/Projects/apps/espn_app/spec/home_screen_spec.rb","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"875cb7ed711954fba658f43d0849c95550e9494a","deserializer":"TextBuffer"},{"text":"describe ESPN do\n\n  before do\n    @espn = ESPN.new\n  end\n\n  it \"is a class\" do\n    @espn.should.be.kind_of(ESPN)\n  end\n\n  it \"can get a response from ESPN now\" do\n    @request = @espn.now do |response|\n      response.should.be.kind_of(Hash)\n      resume\n    end\n    wait {}\n  end\nend\n","markers":{"markers":{"1":{"id":1,"range":[[6,20],[6,20]],"tailed":false,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":23,"preserveFolds":true,"goalBufferRange":null},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[],"redoStack":[],"deserializer":"History"},"filePath":"/Users/mattgarrison/Projects/apps/espn_app/spec/espn_spec.rb","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"84c63c53a90390df2f029bd6954a2df2507343c3","deserializer":"TextBuffer"},{"text":"class ESPN\n  # API_KEY = \"your key here\"\n  NOW_URL = \"http://api.espn.com/v1/now?apikey=#{API_KEY}\"\n\n  def now(&callback)\n    AFMotion::JSON.get(NOW_URL) do |result|\n      callback.call result.object\n    end\n  end\nend\n","markers":{"markers":{"1":{"id":1,"range":[[6,25],[6,25]],"tailed":false,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":43,"goalBufferRange":null,"preserveFolds":true},"deserializer":"Marker"},"2":{"id":2,"range":[[7,7],[7,7]],"tailed":false,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":74,"goalBufferRange":null,"preserveFolds":true},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[],"redoStack":[],"deserializer":"History"},"filePath":"/Users/mattgarrison/Projects/apps/espn_app/app/api/espn.rb","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"28de410b2e11e973043b5aa5976303da3e4a7e15","deserializer":"TextBuffer"},{"text":"class HomeScreen < PM::TableScreen\n  refreshable\n  title \"Home\"\n\n  def table_data\n    [{\n      title: \"\",\n      cells: Array(@headlines)\n    }]\n  end\n\n  def on_load\n    on_refresh\n  end\n\n  def on_refresh\n    ESPN.new.now do |response|\n      @headlines = response[\"feed\"].map do |f|\n        {\n          title: f[\"headline\"],\n          action: :tap_headline,\n          arguments: { links: f[\"links\"] }\n        }\n      end\n      update_table_data\n      stop_refreshing\n    end\n  end\n\n  def extract_href(links)\n    while links.is_a?(Hash)\n      if links[\"href\"]\n        links = links[\"href\"]\n      else\n        links = links.values.first # Extract value\n      end\n    end\n    links\n  end\n\n  def tap_headline(args={})\n    link = extract_href(args[:links])\n\n    if link.is_a?(String)\n      UIApplication.sharedApplication.openURL(NSURL.URLWithString(link))\n    end\n  end\nend\n","markers":{"markers":{"1":{"id":1,"range":[[16,30],[16,30]],"tailed":false,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":46,"goalBufferRange":null,"preserveFolds":true},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[],"redoStack":[],"deserializer":"History"},"filePath":"/Users/mattgarrison/Projects/apps/espn_app/app/screens/home_screen.rb","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"3784099132967564530791cc3715d01b6bde2951","deserializer":"TextBuffer"}],"deserializer":"Project"},"workspace":{"paneContainer":{"root":{"children":[{"items":[{"id":74,"softTabs":true,"scrollTop":0,"scrollLeft":0,"displayBuffer":{"id":73,"softWrap":false,"editorWidthInChars":61,"tokenizedBuffer":{"bufferPath":"/Users/mattgarrison/Projects/apps/espn_app/app/api/espn.rb","tabLength":2,"deserializer":"TokenizedBuffer"},"deserializer":"DisplayBuffer"},"deserializer":"Editor"}],"activeItemUri":"/Users/mattgarrison/Projects/apps/espn_app/app/api/espn.rb","focused":false,"active":false,"deserializer":"Pane"},{"items":[{"id":15,"softTabs":true,"scrollTop":0,"scrollLeft":0,"displayBuffer":{"id":16,"softWrap":false,"editorWidthInChars":89,"tokenizedBuffer":{"bufferPath":"/Users/mattgarrison/Projects/apps/espn_app/Gemfile","tabLength":2,"deserializer":"TokenizedBuffer"},"deserializer":"DisplayBuffer"},"deserializer":"Editor"},{"id":21,"softTabs":true,"scrollTop":0,"scrollLeft":0,"displayBuffer":{"id":22,"softWrap":false,"editorWidthInChars":89,"tokenizedBuffer":{"bufferPath":"/Users/mattgarrison/Projects/apps/espn_app/spec/home_screen_spec.rb","tabLength":2,"deserializer":"TokenizedBuffer"},"deserializer":"DisplayBuffer"},"deserializer":"Editor"},{"id":43,"softTabs":true,"scrollTop":0,"scrollLeft":0,"displayBuffer":{"id":44,"softWrap":false,"editorWidthInChars":61,"tokenizedBuffer":{"bufferPath":"/Users/mattgarrison/Projects/apps/espn_app/app/api/espn.rb","tabLength":2,"deserializer":"TokenizedBuffer"},"deserializer":"DisplayBuffer"},"deserializer":"Editor"},{"id":46,"softTabs":true,"scrollTop":0,"scrollLeft":0,"displayBuffer":{"id":47,"softWrap":false,"editorWidthInChars":73,"tokenizedBuffer":{"bufferPath":"/Users/mattgarrison/Projects/apps/espn_app/app/screens/home_screen.rb","tabLength":2,"deserializer":"TokenizedBuffer"},"deserializer":"DisplayBuffer"},"deserializer":"Editor"},{"id":23,"softTabs":true,"scrollTop":0,"scrollLeft":0,"displayBuffer":{"id":24,"softWrap":false,"editorWidthInChars":58,"tokenizedBuffer":{"bufferPath":"/Users/mattgarrison/Projects/apps/espn_app/spec/espn_spec.rb","tabLength":2,"deserializer":"TokenizedBuffer"},"deserializer":"DisplayBuffer"},"deserializer":"Editor"}],"activeItemUri":"/Users/mattgarrison/Projects/apps/espn_app/spec/espn_spec.rb","focused":true,"active":true,"deserializer":"Pane"}],"orientation":"vertical","deserializer":"PaneAxis"},"deserializer":"PaneContainer"},"fullScreen":false,"deserializer":"Workspace"},"packageStates":{"command-logger":{"eventLog":{"command-palette:toggle":{"count":2,"name":"command-palette:toggle","lastRun":1395174949895},"pane:split-up":{"count":1,"name":"pane:split-up","lastRun":1395174951212}}},"fuzzy-finder":{"/Users/mattgarrison/Projects/apps/espn_app/Gemfile":1395077318506,"/Users/mattgarrison/Projects/apps/espn_app/spec/home_screen_spec.rb":1395085437209,"/Users/mattgarrison/Projects/apps/espn_app/app/api/espn.rb":1395174951280,"/Users/mattgarrison/Projects/apps/espn_app/app/screens/home_screen.rb":1395083620577,"/Users/mattgarrison/Projects/apps/espn_app/spec/espn_spec.rb":1395174954936},"keybinding-resolver":{"attached":false},"metrics":{"sessionLength":64200350},"tree-view":{"directoryExpansionStates":{"app":{"api":{},"screens":{},"styles":{}},"spec":{}},"selectedPath":"/Users/mattgarrison/Projects/apps/espn_app/spec/espn_spec.rb","hasFocus":false,"attached":true,"scrollLeft":0,"scrollTop":0,"width":200}}}